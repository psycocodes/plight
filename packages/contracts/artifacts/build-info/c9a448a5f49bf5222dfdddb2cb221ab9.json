{"id":"c9a448a5f49bf5222dfdddb2cb221ab9","_format":"hh-sol-build-info-1","solcVersion":"0.8.20","solcLongVersion":"0.8.20+commit.a1b79de6","input":{"language":"Solidity","sources":{"src/HealthPolicy.sol":{"content":"// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\n/**\n * @title IVerifier\n * @dev Interface for the ZK Verifier contract (Groth16).\n */\ninterface IVerifier {\n    function verifyProof(\n        bytes calldata proof,\n        uint256[] calldata publicSignals\n    ) external view returns (bool);\n}\n\n/**\n * @title HealthPolicy\n * @author Plight\n * @notice Enforces cryptographic eligibility policies without storing user data.\n * \n * DESIGN PHILOSOPHY:\n * 1. Stateless: This contract has NO storage. It does not track who is healthy.\n * 2. Pure Verification: It relies 100% on the ZK Verifier to guarantee correctness.\n * 3. No Simulation: This is not a mock. It accepts real cryptographic proofs.\n */\ncontract HealthPolicy {\n    /// @notice The immutable address of the ZK Verifier contract.\n    /// @dev Set once at deployment. Cannot be changed.\n    IVerifier public immutable verifier;\n\n    // Error definitions for gas efficiency and clarity\n    error InvalidProof();\n    error VerificationFailed();\n\n    /**\n     * @param _verifier The address of the deployed PlightVerifier contract.\n     */\n    constructor(address _verifier) {\n        require(_verifier != address(0), \"Invalid verifier address\");\n        verifier = IVerifier(_verifier);\n    }\n\n    /**\n     * @notice Verifies if a user is \"Healthy\" (Eligible) based on a ZK Proof.\n     * @dev This function is view-only and stateless.\n     * @param user The address of the user claiming health (bound to the proof).\n     * @param proof The encoded ZK proof (Groth16).\n     * @param publicInputs The public signals for the circuit [attestationHash, expires, etc.].\n     * @return bool True if the proof is valid and binds to the user.\n     */\n    function isHealthy(\n        address user,\n        bytes calldata proof,\n        uint256[] calldata publicInputs\n    ) external view returns (bool) {\n        // 1. Verify the Proof\n        // The ZK Verifier guarantees that the inputs satisfy the circuit constraints:\n        // - \"liquidationCount == 0\" (Policy Check)\n        // - \"attestationHash\" matches the signed data\n        // - \"signature\" is valid from the Notary\n        bool success = verifier.verifyProof(proof, publicInputs);\n        return success;\n    }\n}\n"}},"settings":{"optimizer":{"enabled":true,"runs":200},"viaIR":true,"evmVersion":"paris","outputSelection":{"*":{"*":["abi","evm.bytecode","evm.deployedBytecode","evm.methodIdentifiers","metadata"],"":["ast"]}}}},"output":{"errors":[{"component":"general","errorCode":"5667","formattedMessage":"Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\n  --> src/HealthPolicy.sol:51:9:\n   |\n51 |         address user,\n   |         ^^^^^^^^^^^^\n\n","message":"Unused function parameter. Remove or comment out the variable name to silence this warning.","severity":"warning","sourceLocation":{"end":1747,"file":"src/HealthPolicy.sol","start":1735},"type":"Warning"}],"sources":{"src/HealthPolicy.sol":{"ast":{"absolutePath":"src/HealthPolicy.sol","exportedSymbols":{"HealthPolicy":[70],"IVerifier":[13]},"id":71,"license":"MIT","nodeType":"SourceUnit","nodes":[{"id":1,"literals":["solidity","^","0.8",".0"],"nodeType":"PragmaDirective","src":"32:23:0"},{"abstract":false,"baseContracts":[],"canonicalName":"IVerifier","contractDependencies":[],"contractKind":"interface","documentation":{"id":2,"nodeType":"StructuredDocumentation","src":"57:85:0","text":" @title IVerifier\n @dev Interface for the ZK Verifier contract (Groth16)."},"fullyImplemented":false,"id":13,"linearizedBaseContracts":[13],"name":"IVerifier","nameLocation":"153:9:0","nodeType":"ContractDefinition","nodes":[{"functionSelector":"1e8e1e13","id":12,"implemented":false,"kind":"function","modifiers":[],"name":"verifyProof","nameLocation":"178:11:0","nodeType":"FunctionDefinition","parameters":{"id":8,"nodeType":"ParameterList","parameters":[{"constant":false,"id":4,"mutability":"mutable","name":"proof","nameLocation":"214:5:0","nodeType":"VariableDeclaration","scope":12,"src":"199:20:0","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":3,"name":"bytes","nodeType":"ElementaryTypeName","src":"199:5:0","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":7,"mutability":"mutable","name":"publicSignals","nameLocation":"248:13:0","nodeType":"VariableDeclaration","scope":12,"src":"229:32:0","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":5,"name":"uint256","nodeType":"ElementaryTypeName","src":"229:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6,"nodeType":"ArrayTypeName","src":"229:9:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"189:78:0"},"returnParameters":{"id":11,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12,"src":"291:4:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":9,"name":"bool","nodeType":"ElementaryTypeName","src":"291:4:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"290:6:0"},"scope":13,"src":"169:128:0","stateMutability":"view","virtual":false,"visibility":"external"}],"scope":71,"src":"143:156:0","usedErrors":[],"usedEvents":[]},{"abstract":false,"baseContracts":[],"canonicalName":"HealthPolicy","contractDependencies":[],"contractKind":"contract","documentation":{"id":14,"nodeType":"StructuredDocumentation","src":"301:401:0","text":" @title HealthPolicy\n @author Plight\n @notice Enforces cryptographic eligibility policies without storing user data.\n \n DESIGN PHILOSOPHY:\n 1. Stateless: This contract has NO storage. It does not track who is healthy.\n 2. Pure Verification: It relies 100% on the ZK Verifier to guarantee correctness.\n 3. No Simulation: This is not a mock. It accepts real cryptographic proofs."},"fullyImplemented":true,"id":70,"linearizedBaseContracts":[70],"name":"HealthPolicy","nameLocation":"712:12:0","nodeType":"ContractDefinition","nodes":[{"constant":false,"documentation":{"id":15,"nodeType":"StructuredDocumentation","src":"731:118:0","text":"@notice The immutable address of the ZK Verifier contract.\n @dev Set once at deployment. Cannot be changed."},"functionSelector":"2b7ac3f3","id":18,"mutability":"immutable","name":"verifier","nameLocation":"881:8:0","nodeType":"VariableDeclaration","scope":70,"src":"854:35:0","stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"},"typeName":{"id":17,"nodeType":"UserDefinedTypeName","pathNode":{"id":16,"name":"IVerifier","nameLocations":["854:9:0"],"nodeType":"IdentifierPath","referencedDeclaration":13,"src":"854:9:0"},"referencedDeclaration":13,"src":"854:9:0","typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"}},"visibility":"public"},{"errorSelector":"09bde339","id":20,"name":"InvalidProof","nameLocation":"958:12:0","nodeType":"ErrorDefinition","parameters":{"id":19,"nodeType":"ParameterList","parameters":[],"src":"970:2:0"},"src":"952:21:0"},{"errorSelector":"439cc0cd","id":22,"name":"VerificationFailed","nameLocation":"984:18:0","nodeType":"ErrorDefinition","parameters":{"id":21,"nodeType":"ParameterList","parameters":[],"src":"1002:2:0"},"src":"978:27:0"},{"body":{"id":44,"nodeType":"Block","src":"1135:118:0","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":34,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":29,"name":"_verifier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":25,"src":"1153:9:0","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":32,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1174:1:0","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":31,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1166:7:0","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":30,"name":"address","nodeType":"ElementaryTypeName","src":"1166:7:0","typeDescriptions":{}}},"id":33,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1166:10:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1153:23:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"496e76616c69642076657269666965722061646472657373","id":35,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1178:26:0","typeDescriptions":{"typeIdentifier":"t_stringliteral_af54df3ee99e70071616e3972779618a9123698d90a7cfaa88df1de961fd5b68","typeString":"literal_string \"Invalid verifier address\""},"value":"Invalid verifier address"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_af54df3ee99e70071616e3972779618a9123698d90a7cfaa88df1de961fd5b68","typeString":"literal_string \"Invalid verifier address\""}],"id":28,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"1145:7:0","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":36,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1145:60:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":37,"nodeType":"ExpressionStatement","src":"1145:60:0"},{"expression":{"id":42,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":38,"name":"verifier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18,"src":"1215:8:0","typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":40,"name":"_verifier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":25,"src":"1236:9:0","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":39,"name":"IVerifier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":13,"src":"1226:9:0","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IVerifier_$13_$","typeString":"type(contract IVerifier)"}},"id":41,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1226:20:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"}},"src":"1215:31:0","typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"}},"id":43,"nodeType":"ExpressionStatement","src":"1215:31:0"}]},"documentation":{"id":23,"nodeType":"StructuredDocumentation","src":"1011:88:0","text":" @param _verifier The address of the deployed PlightVerifier contract."},"id":45,"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","nodeType":"FunctionDefinition","parameters":{"id":26,"nodeType":"ParameterList","parameters":[{"constant":false,"id":25,"mutability":"mutable","name":"_verifier","nameLocation":"1124:9:0","nodeType":"VariableDeclaration","scope":45,"src":"1116:17:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":24,"name":"address","nodeType":"ElementaryTypeName","src":"1116:7:0","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1115:19:0"},"returnParameters":{"id":27,"nodeType":"ParameterList","parameters":[],"src":"1135:0:0"},"scope":70,"src":"1104:149:0","stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"body":{"id":68,"nodeType":"Block","src":"1854:372:0","statements":[{"assignments":[59],"declarations":[{"constant":false,"id":59,"mutability":"mutable","name":"success","nameLocation":"2144:7:0","nodeType":"VariableDeclaration","scope":68,"src":"2139:12:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":58,"name":"bool","nodeType":"ElementaryTypeName","src":"2139:4:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":65,"initialValue":{"arguments":[{"id":62,"name":"proof","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":50,"src":"2175:5:0","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}},{"id":63,"name":"publicInputs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":53,"src":"2182:12:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[] calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"},{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[] calldata"}],"expression":{"id":60,"name":"verifier","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":18,"src":"2154:8:0","typeDescriptions":{"typeIdentifier":"t_contract$_IVerifier_$13","typeString":"contract IVerifier"}},"id":61,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2163:11:0","memberName":"verifyProof","nodeType":"MemberAccess","referencedDeclaration":12,"src":"2154:20:0","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_bytes_memory_ptr_$_t_array$_t_uint256_$dyn_memory_ptr_$returns$_t_bool_$","typeString":"function (bytes memory,uint256[] memory) view external returns (bool)"}},"id":64,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2154:41:0","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"2139:56:0"},{"expression":{"id":66,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59,"src":"2212:7:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":57,"id":67,"nodeType":"Return","src":"2205:14:0"}]},"documentation":{"id":46,"nodeType":"StructuredDocumentation","src":"1259:443:0","text":" @notice Verifies if a user is \"Healthy\" (Eligible) based on a ZK Proof.\n @dev This function is view-only and stateless.\n @param user The address of the user claiming health (bound to the proof).\n @param proof The encoded ZK proof (Groth16).\n @param publicInputs The public signals for the circuit [attestationHash, expires, etc.].\n @return bool True if the proof is valid and binds to the user."},"functionSelector":"4e8ee36e","id":69,"implemented":true,"kind":"function","modifiers":[],"name":"isHealthy","nameLocation":"1716:9:0","nodeType":"FunctionDefinition","parameters":{"id":54,"nodeType":"ParameterList","parameters":[{"constant":false,"id":48,"mutability":"mutable","name":"user","nameLocation":"1743:4:0","nodeType":"VariableDeclaration","scope":69,"src":"1735:12:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":47,"name":"address","nodeType":"ElementaryTypeName","src":"1735:7:0","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":50,"mutability":"mutable","name":"proof","nameLocation":"1772:5:0","nodeType":"VariableDeclaration","scope":69,"src":"1757:20:0","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":49,"name":"bytes","nodeType":"ElementaryTypeName","src":"1757:5:0","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":53,"mutability":"mutable","name":"publicInputs","nameLocation":"1806:12:0","nodeType":"VariableDeclaration","scope":69,"src":"1787:31:0","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_calldata_ptr","typeString":"uint256[]"},"typeName":{"baseType":{"id":51,"name":"uint256","nodeType":"ElementaryTypeName","src":"1787:7:0","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":52,"nodeType":"ArrayTypeName","src":"1787:9:0","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$dyn_storage_ptr","typeString":"uint256[]"}},"visibility":"internal"}],"src":"1725:99:0"},"returnParameters":{"id":57,"nodeType":"ParameterList","parameters":[{"constant":false,"id":56,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":69,"src":"1848:4:0","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":55,"name":"bool","nodeType":"ElementaryTypeName","src":"1848:4:0","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"1847:6:0"},"scope":70,"src":"1707:519:0","stateMutability":"view","virtual":false,"visibility":"external"}],"scope":71,"src":"703:1525:0","usedErrors":[20,22],"usedEvents":[]}],"src":"32:2197:0"},"id":0}},"contracts":{"src/HealthPolicy.sol":{"HealthPolicy":{"abi":[{"inputs":[{"internalType":"address","name":"_verifier","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"InvalidProof","type":"error"},{"inputs":[],"name":"VerificationFailed","type":"error"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"bytes","name":"proof","type":"bytes"},{"internalType":"uint256[]","name":"publicInputs","type":"uint256[]"}],"name":"isHealthy","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"verifier","outputs":[{"internalType":"contract IVerifier","name":"","type":"address"}],"stateMutability":"view","type":"function"}],"evm":{"bytecode":{"functionDebugData":{},"generatedSources":[],"linkReferences":{},"object":"60a0346100be57601f61035138819003918201601f19168301916001600160401b038311848410176100c3578084926020946040528339810103126100be57516001600160a01b038116908190036100be5780156100795760805260405161027790816100da8239608051818181610131015261020e0152f35b60405162461bcd60e51b815260206004820152601860248201527f496e76616c6964207665726966696572206164647265737300000000000000006044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060408181526004908136101561001657600080fd5b600092833560e01c9081632b7ac3f3146101fa5750634e8ee36e1461003a57600080fd5b346101bb5760603660031901126101bb576001600160a01b038235818116036101f657602480359067ffffffffffffffff908183116101f257366023840112156101f25782860135938285116101ee57368286860101116101ee576044358381116101ea57366023820112156101ea5780880135918483116101e6578260051b368582850101116101e2578851631e8e1e1360e01b8152808b018a90526044810189905297601f978190870160648b01378b6064828b01015287199788910116880193606089860301868a015280606486015260018060fb1b03106101e257608488826020968296948984960185830137010301917f0000000000000000000000000000000000000000000000000000000000000000165afa9586156101d857879661016d575b60208787519015158152f35b909192939495506020933d85116101d0575b601f8501168501928311858410176101bf57505060209183918552810103126101bb575180151581036101bb5760209250903880808080610161565b8280fd5b634e487b7160e01b87526041905285fd5b3d945061017f565b85513d89823e3d90fd5b8a80fd5b8980fd5b8880fd5b8780fd5b8680fd5b8380fd5b84903461023d578160031936011261023d577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b5080fdfea26469706673582212206e8fcd95c37237e421ee0acfbc097c13e2ef12ae0253abef1c35d8f0f56341b264736f6c63430008140033","opcodes":"PUSH1 0xA0 CALLVALUE PUSH2 0xBE JUMPI PUSH1 0x1F PUSH2 0x351 CODESIZE DUP2 SWAP1 SUB SWAP2 DUP3 ADD PUSH1 0x1F NOT AND DUP4 ADD SWAP2 PUSH1 0x1 PUSH1 0x1 PUSH1 0x40 SHL SUB DUP4 GT DUP5 DUP5 LT OR PUSH2 0xC3 JUMPI DUP1 DUP5 SWAP3 PUSH1 0x20 SWAP5 PUSH1 0x40 MSTORE DUP4 CODECOPY DUP2 ADD SUB SLT PUSH2 0xBE JUMPI MLOAD PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP2 AND SWAP1 DUP2 SWAP1 SUB PUSH2 0xBE JUMPI DUP1 ISZERO PUSH2 0x79 JUMPI PUSH1 0x80 MSTORE PUSH1 0x40 MLOAD PUSH2 0x277 SWAP1 DUP2 PUSH2 0xDA DUP3 CODECOPY PUSH1 0x80 MLOAD DUP2 DUP2 DUP2 PUSH2 0x131 ADD MSTORE PUSH2 0x20E ADD MSTORE RETURN JUMPDEST PUSH1 0x40 MLOAD PUSH3 0x461BCD PUSH1 0xE5 SHL DUP2 MSTORE PUSH1 0x20 PUSH1 0x4 DUP3 ADD MSTORE PUSH1 0x18 PUSH1 0x24 DUP3 ADD MSTORE PUSH32 0x496E76616C696420766572696669657220616464726573730000000000000000 PUSH1 0x44 DUP3 ADD MSTORE PUSH1 0x64 SWAP1 REVERT JUMPDEST PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL PUSH1 0x0 MSTORE PUSH1 0x41 PUSH1 0x4 MSTORE PUSH1 0x24 PUSH1 0x0 REVERT INVALID PUSH1 0x80 PUSH1 0x40 DUP2 DUP2 MSTORE PUSH1 0x4 SWAP1 DUP2 CALLDATASIZE LT ISZERO PUSH2 0x16 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 SWAP3 DUP4 CALLDATALOAD PUSH1 0xE0 SHR SWAP1 DUP2 PUSH4 0x2B7AC3F3 EQ PUSH2 0x1FA JUMPI POP PUSH4 0x4E8EE36E EQ PUSH2 0x3A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x1BB JUMPI PUSH1 0x60 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x1BB JUMPI PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP3 CALLDATALOAD DUP2 DUP2 AND SUB PUSH2 0x1F6 JUMPI PUSH1 0x24 DUP1 CALLDATALOAD SWAP1 PUSH8 0xFFFFFFFFFFFFFFFF SWAP1 DUP2 DUP4 GT PUSH2 0x1F2 JUMPI CALLDATASIZE PUSH1 0x23 DUP5 ADD SLT ISZERO PUSH2 0x1F2 JUMPI DUP3 DUP7 ADD CALLDATALOAD SWAP4 DUP3 DUP6 GT PUSH2 0x1EE JUMPI CALLDATASIZE DUP3 DUP7 DUP7 ADD ADD GT PUSH2 0x1EE JUMPI PUSH1 0x44 CALLDATALOAD DUP4 DUP2 GT PUSH2 0x1EA JUMPI CALLDATASIZE PUSH1 0x23 DUP3 ADD SLT ISZERO PUSH2 0x1EA JUMPI DUP1 DUP9 ADD CALLDATALOAD SWAP2 DUP5 DUP4 GT PUSH2 0x1E6 JUMPI DUP3 PUSH1 0x5 SHL CALLDATASIZE DUP6 DUP3 DUP6 ADD ADD GT PUSH2 0x1E2 JUMPI DUP9 MLOAD PUSH4 0x1E8E1E13 PUSH1 0xE0 SHL DUP2 MSTORE DUP1 DUP12 ADD DUP11 SWAP1 MSTORE PUSH1 0x44 DUP2 ADD DUP10 SWAP1 MSTORE SWAP8 PUSH1 0x1F SWAP8 DUP2 SWAP1 DUP8 ADD PUSH1 0x64 DUP12 ADD CALLDATACOPY DUP12 PUSH1 0x64 DUP3 DUP12 ADD ADD MSTORE DUP8 NOT SWAP8 DUP9 SWAP2 ADD AND DUP9 ADD SWAP4 PUSH1 0x60 DUP10 DUP7 SUB ADD DUP7 DUP11 ADD MSTORE DUP1 PUSH1 0x64 DUP7 ADD MSTORE PUSH1 0x1 DUP1 PUSH1 0xFB SHL SUB LT PUSH2 0x1E2 JUMPI PUSH1 0x84 DUP9 DUP3 PUSH1 0x20 SWAP7 DUP3 SWAP7 SWAP5 DUP10 DUP5 SWAP7 ADD DUP6 DUP4 ADD CALLDATACOPY ADD SUB ADD SWAP2 PUSH32 0x0 AND GAS STATICCALL SWAP6 DUP7 ISZERO PUSH2 0x1D8 JUMPI DUP8 SWAP7 PUSH2 0x16D JUMPI JUMPDEST PUSH1 0x20 DUP8 DUP8 MLOAD SWAP1 ISZERO ISZERO DUP2 MSTORE RETURN JUMPDEST SWAP1 SWAP2 SWAP3 SWAP4 SWAP5 SWAP6 POP PUSH1 0x20 SWAP4 RETURNDATASIZE DUP6 GT PUSH2 0x1D0 JUMPI JUMPDEST PUSH1 0x1F DUP6 ADD AND DUP6 ADD SWAP3 DUP4 GT DUP6 DUP5 LT OR PUSH2 0x1BF JUMPI POP POP PUSH1 0x20 SWAP2 DUP4 SWAP2 DUP6 MSTORE DUP2 ADD SUB SLT PUSH2 0x1BB JUMPI MLOAD DUP1 ISZERO ISZERO DUP2 SUB PUSH2 0x1BB JUMPI PUSH1 0x20 SWAP3 POP SWAP1 CODESIZE DUP1 DUP1 DUP1 DUP1 PUSH2 0x161 JUMP JUMPDEST DUP3 DUP1 REVERT JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP8 MSTORE PUSH1 0x41 SWAP1 MSTORE DUP6 REVERT JUMPDEST RETURNDATASIZE SWAP5 POP PUSH2 0x17F JUMP JUMPDEST DUP6 MLOAD RETURNDATASIZE DUP10 DUP3 RETURNDATACOPY RETURNDATASIZE SWAP1 REVERT JUMPDEST DUP11 DUP1 REVERT JUMPDEST DUP10 DUP1 REVERT JUMPDEST DUP9 DUP1 REVERT JUMPDEST DUP8 DUP1 REVERT JUMPDEST DUP7 DUP1 REVERT JUMPDEST DUP4 DUP1 REVERT JUMPDEST DUP5 SWAP1 CALLVALUE PUSH2 0x23D JUMPI DUP2 PUSH1 0x3 NOT CALLDATASIZE ADD SLT PUSH2 0x23D JUMPI PUSH32 0x0 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND DUP2 MSTORE PUSH1 0x20 SWAP1 RETURN JUMPDEST POP DUP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 PUSH15 0x8FCD95C37237E421EE0ACFBC097C13 0xE2 0xEF SLT 0xAE MUL MSTORE8 0xAB 0xEF SHR CALLDATALOAD 0xD8 CREATE CREATE2 PUSH4 0x41B26473 PUSH16 0x6C634300081400330000000000000000 ","sourceMap":"703:1525:0:-:0;;;;;;;;;;;;;-1:-1:-1;;703:1525:0;;;;-1:-1:-1;;;;;703:1525:0;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;703:1525:0;;;;;;;;1153:23;;703:1525;;1215:31;;703:1525;;;;;;;;1215:31;703:1525;;;;;;;;;;;;;;-1:-1:-1;;;703:1525:0;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;703:1525:0;;;;;;-1:-1:-1;703:1525:0;;;;;-1:-1:-1;703:1525:0"},"deployedBytecode":{"functionDebugData":{},"generatedSources":[],"immutableReferences":{"18":[{"length":32,"start":305},{"length":32,"start":526}]},"linkReferences":{},"object":"608060408181526004908136101561001657600080fd5b600092833560e01c9081632b7ac3f3146101fa5750634e8ee36e1461003a57600080fd5b346101bb5760603660031901126101bb576001600160a01b038235818116036101f657602480359067ffffffffffffffff908183116101f257366023840112156101f25782860135938285116101ee57368286860101116101ee576044358381116101ea57366023820112156101ea5780880135918483116101e6578260051b368582850101116101e2578851631e8e1e1360e01b8152808b018a90526044810189905297601f978190870160648b01378b6064828b01015287199788910116880193606089860301868a015280606486015260018060fb1b03106101e257608488826020968296948984960185830137010301917f0000000000000000000000000000000000000000000000000000000000000000165afa9586156101d857879661016d575b60208787519015158152f35b909192939495506020933d85116101d0575b601f8501168501928311858410176101bf57505060209183918552810103126101bb575180151581036101bb5760209250903880808080610161565b8280fd5b634e487b7160e01b87526041905285fd5b3d945061017f565b85513d89823e3d90fd5b8a80fd5b8980fd5b8880fd5b8780fd5b8680fd5b8380fd5b84903461023d578160031936011261023d577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b5080fdfea26469706673582212206e8fcd95c37237e421ee0acfbc097c13e2ef12ae0253abef1c35d8f0f56341b264736f6c63430008140033","opcodes":"PUSH1 0x80 PUSH1 0x40 DUP2 DUP2 MSTORE PUSH1 0x4 SWAP1 DUP2 CALLDATASIZE LT ISZERO PUSH2 0x16 JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST PUSH1 0x0 SWAP3 DUP4 CALLDATALOAD PUSH1 0xE0 SHR SWAP1 DUP2 PUSH4 0x2B7AC3F3 EQ PUSH2 0x1FA JUMPI POP PUSH4 0x4E8EE36E EQ PUSH2 0x3A JUMPI PUSH1 0x0 DUP1 REVERT JUMPDEST CALLVALUE PUSH2 0x1BB JUMPI PUSH1 0x60 CALLDATASIZE PUSH1 0x3 NOT ADD SLT PUSH2 0x1BB JUMPI PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB DUP3 CALLDATALOAD DUP2 DUP2 AND SUB PUSH2 0x1F6 JUMPI PUSH1 0x24 DUP1 CALLDATALOAD SWAP1 PUSH8 0xFFFFFFFFFFFFFFFF SWAP1 DUP2 DUP4 GT PUSH2 0x1F2 JUMPI CALLDATASIZE PUSH1 0x23 DUP5 ADD SLT ISZERO PUSH2 0x1F2 JUMPI DUP3 DUP7 ADD CALLDATALOAD SWAP4 DUP3 DUP6 GT PUSH2 0x1EE JUMPI CALLDATASIZE DUP3 DUP7 DUP7 ADD ADD GT PUSH2 0x1EE JUMPI PUSH1 0x44 CALLDATALOAD DUP4 DUP2 GT PUSH2 0x1EA JUMPI CALLDATASIZE PUSH1 0x23 DUP3 ADD SLT ISZERO PUSH2 0x1EA JUMPI DUP1 DUP9 ADD CALLDATALOAD SWAP2 DUP5 DUP4 GT PUSH2 0x1E6 JUMPI DUP3 PUSH1 0x5 SHL CALLDATASIZE DUP6 DUP3 DUP6 ADD ADD GT PUSH2 0x1E2 JUMPI DUP9 MLOAD PUSH4 0x1E8E1E13 PUSH1 0xE0 SHL DUP2 MSTORE DUP1 DUP12 ADD DUP11 SWAP1 MSTORE PUSH1 0x44 DUP2 ADD DUP10 SWAP1 MSTORE SWAP8 PUSH1 0x1F SWAP8 DUP2 SWAP1 DUP8 ADD PUSH1 0x64 DUP12 ADD CALLDATACOPY DUP12 PUSH1 0x64 DUP3 DUP12 ADD ADD MSTORE DUP8 NOT SWAP8 DUP9 SWAP2 ADD AND DUP9 ADD SWAP4 PUSH1 0x60 DUP10 DUP7 SUB ADD DUP7 DUP11 ADD MSTORE DUP1 PUSH1 0x64 DUP7 ADD MSTORE PUSH1 0x1 DUP1 PUSH1 0xFB SHL SUB LT PUSH2 0x1E2 JUMPI PUSH1 0x84 DUP9 DUP3 PUSH1 0x20 SWAP7 DUP3 SWAP7 SWAP5 DUP10 DUP5 SWAP7 ADD DUP6 DUP4 ADD CALLDATACOPY ADD SUB ADD SWAP2 PUSH32 0x0 AND GAS STATICCALL SWAP6 DUP7 ISZERO PUSH2 0x1D8 JUMPI DUP8 SWAP7 PUSH2 0x16D JUMPI JUMPDEST PUSH1 0x20 DUP8 DUP8 MLOAD SWAP1 ISZERO ISZERO DUP2 MSTORE RETURN JUMPDEST SWAP1 SWAP2 SWAP3 SWAP4 SWAP5 SWAP6 POP PUSH1 0x20 SWAP4 RETURNDATASIZE DUP6 GT PUSH2 0x1D0 JUMPI JUMPDEST PUSH1 0x1F DUP6 ADD AND DUP6 ADD SWAP3 DUP4 GT DUP6 DUP5 LT OR PUSH2 0x1BF JUMPI POP POP PUSH1 0x20 SWAP2 DUP4 SWAP2 DUP6 MSTORE DUP2 ADD SUB SLT PUSH2 0x1BB JUMPI MLOAD DUP1 ISZERO ISZERO DUP2 SUB PUSH2 0x1BB JUMPI PUSH1 0x20 SWAP3 POP SWAP1 CODESIZE DUP1 DUP1 DUP1 DUP1 PUSH2 0x161 JUMP JUMPDEST DUP3 DUP1 REVERT JUMPDEST PUSH4 0x4E487B71 PUSH1 0xE0 SHL DUP8 MSTORE PUSH1 0x41 SWAP1 MSTORE DUP6 REVERT JUMPDEST RETURNDATASIZE SWAP5 POP PUSH2 0x17F JUMP JUMPDEST DUP6 MLOAD RETURNDATASIZE DUP10 DUP3 RETURNDATACOPY RETURNDATASIZE SWAP1 REVERT JUMPDEST DUP11 DUP1 REVERT JUMPDEST DUP10 DUP1 REVERT JUMPDEST DUP9 DUP1 REVERT JUMPDEST DUP8 DUP1 REVERT JUMPDEST DUP7 DUP1 REVERT JUMPDEST DUP4 DUP1 REVERT JUMPDEST DUP5 SWAP1 CALLVALUE PUSH2 0x23D JUMPI DUP2 PUSH1 0x3 NOT CALLDATASIZE ADD SLT PUSH2 0x23D JUMPI PUSH32 0x0 PUSH1 0x1 PUSH1 0x1 PUSH1 0xA0 SHL SUB AND DUP2 MSTORE PUSH1 0x20 SWAP1 RETURN JUMPDEST POP DUP1 REVERT INVALID LOG2 PUSH5 0x6970667358 0x22 SLT KECCAK256 PUSH15 0x8FCD95C37237E421EE0ACFBC097C13 0xE2 0xEF SLT 0xAE MUL MSTORE8 0xAB 0xEF SHR CALLDATALOAD 0xD8 CREATE CREATE2 PUSH4 0x41B26473 PUSH16 0x6C634300081400330000000000000000 ","sourceMap":"703:1525:0:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;703:1525:0;;;;-1:-1:-1;;;;;703:1525:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;2154:41:0;;;;;703:1525;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;703:1525:0;;;;;;;;;;;;;;;;;;;2154:41;;:8;;703:1525;2154:41;;;;;;;;;;;703:1525;;;;;;;;;;;2154:41;;;;;;;;703:1525;2154:41;;;;;;;703:1525;;;;;;;;;;;;;;;;;;;;;;;2154:41;;703:1525;;;;;;;;;;;;;2154:41;;;;;;;;;;703:1525;;;;;-1:-1:-1;;;703:1525:0;;;;;;;2154:41;;;-1:-1:-1;2154:41:0;;;703:1525;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;854:35;-1:-1:-1;;;;;703:1525:0;;;;;;;;;"},"methodIdentifiers":{"isHealthy(address,bytes,uint256[])":"4e8ee36e","verifier()":"2b7ac3f3"}},"metadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_verifier\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidProof\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"VerificationFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"proof\",\"type\":\"bytes\"},{\"internalType\":\"uint256[]\",\"name\":\"publicInputs\",\"type\":\"uint256[]\"}],\"name\":\"isHealthy\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"verifier\",\"outputs\":[{\"internalType\":\"contract IVerifier\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Plight\",\"kind\":\"dev\",\"methods\":{\"constructor\":{\"params\":{\"_verifier\":\"The address of the deployed PlightVerifier contract.\"}},\"isHealthy(address,bytes,uint256[])\":{\"details\":\"This function is view-only and stateless.\",\"params\":{\"proof\":\"The encoded ZK proof (Groth16).\",\"publicInputs\":\"The public signals for the circuit [attestationHash, expires, etc.].\",\"user\":\"The address of the user claiming health (bound to the proof).\"},\"returns\":{\"_0\":\"bool True if the proof is valid and binds to the user.\"}}},\"stateVariables\":{\"verifier\":{\"details\":\"Set once at deployment. Cannot be changed.\"}},\"title\":\"HealthPolicy\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"isHealthy(address,bytes,uint256[])\":{\"notice\":\"Verifies if a user is \\\"Healthy\\\" (Eligible) based on a ZK Proof.\"},\"verifier()\":{\"notice\":\"The immutable address of the ZK Verifier contract.\"}},\"notice\":\"Enforces cryptographic eligibility policies without storing user data.  DESIGN PHILOSOPHY: 1. Stateless: This contract has NO storage. It does not track who is healthy. 2. Pure Verification: It relies 100% on the ZK Verifier to guarantee correctness. 3. No Simulation: This is not a mock. It accepts real cryptographic proofs.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/HealthPolicy.sol\":\"HealthPolicy\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[],\"viaIR\":true},\"sources\":{\"src/HealthPolicy.sol\":{\"keccak256\":\"0x532bb958ee1eccd6ee95a79bf06b0ff858570c313de3a5338a93824192488dcf\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://de5f3973deeace7affbf01d4c01e3764ac34411c3901b1141a80465e9d21666b\",\"dweb:/ipfs/QmUiQ5PNPiZF7JRgz7nnTmSUSZGETfPHgmVUnvRXLvuLk3\"]}},\"version\":1}"},"IVerifier":{"abi":[{"inputs":[{"internalType":"bytes","name":"proof","type":"bytes"},{"internalType":"uint256[]","name":"publicSignals","type":"uint256[]"}],"name":"verifyProof","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}],"evm":{"bytecode":{"functionDebugData":{},"generatedSources":[],"linkReferences":{},"object":"","opcodes":"","sourceMap":""},"deployedBytecode":{"functionDebugData":{},"generatedSources":[],"immutableReferences":{},"linkReferences":{},"object":"","opcodes":"","sourceMap":""},"methodIdentifiers":{"verifyProof(bytes,uint256[])":"1e8e1e13"}},"metadata":"{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"proof\",\"type\":\"bytes\"},{\"internalType\":\"uint256[]\",\"name\":\"publicSignals\",\"type\":\"uint256[]\"}],\"name\":\"verifyProof\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Interface for the ZK Verifier contract (Groth16).\",\"kind\":\"dev\",\"methods\":{},\"title\":\"IVerifier\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/HealthPolicy.sol\":\"IVerifier\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[],\"viaIR\":true},\"sources\":{\"src/HealthPolicy.sol\":{\"keccak256\":\"0x532bb958ee1eccd6ee95a79bf06b0ff858570c313de3a5338a93824192488dcf\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://de5f3973deeace7affbf01d4c01e3764ac34411c3901b1141a80465e9d21666b\",\"dweb:/ipfs/QmUiQ5PNPiZF7JRgz7nnTmSUSZGETfPHgmVUnvRXLvuLk3\"]}},\"version\":1}"}}}}}